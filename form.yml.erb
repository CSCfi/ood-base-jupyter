<% require "/appl/opt/ood_util/attributes/csc_slurm_partition" -%>
<% require "/appl/opt/ood_util/attributes/csc_slurm_project" -%>
<% require "/appl/opt/ood_util/attributes/csc_slurm_limits" -%>
<% require "/appl/opt/ood_util/attributes/csc_cores" -%>
<% require "/appl/opt/ood_util/attributes/csc_time" -%>
<% require "/appl/opt/ood_util/attributes/csc_memory" -%>
<% require "/appl/opt/ood_util/attributes/csc_nvme" -%>
# Batch Connect app configuration file
#
# @note Used to define the submitted cluster, title, description, and
#   hard-coded/user-defined attributes that make up this Batch Connect app.
---

# **MUST** set cluster id here that matches cluster configuration file located
# under /etc/ood/config/clusters.d/*.yml
# @example Use the Owens cluster at Ohio Supercomputer Center
#     cluster: "owens"
cluster: "puhti"

# Define attribute values that aren't meant to be modified by the user within
# the Dashboard form
attributes:
  # Set the corresponding modules that need to be loaded for Jupyter to run
  #
  # @note It is called within the batch job as `module load <modules>` if
  #   defined
  # @example Do not load any modules
  #     modules: ""
  # @example Using default python module
  #     modules: "python"
  # @example Using specific python module
  #     modules: "python/3.5"
  # @example Using combination of modules
  #     modules: "python/3.5 cuda/8.0.44"
  #modules: "python-env/2019.3"
  #bc_queue: "test" 

  # Any extra command line arguments to feed to the `jupyter notebook ...`
  # command that launches the Jupyter notebook within the batch job
  extra_jupyter_args:
      value: ""

  csc_cores:
      value: 1
      max: 4
      cacheable: false
  csc_nvme:
      value: 32
      widget: number_field
      max: 640
  csc_slurm_partition:
      value: "interactive"
      fixed: true 
  csc_memory:
      widget: number_field
      label: "Memory (GB)"
      max: 64
      min: 2
      value: 2
      cacheable: false
  csc_time:
      value: "4:00:00"
      cacheable: false
  modules:
      label: Python
      widget: select
      options:
          - ["python-data"]
          - ["geoconda"]
          - ["python-env"]
  jp_type:
      widget: select
      label: "Jupyter type"
      options:
        - ["Notebook","notebook"]
        - ["Lab","lab"]    
      value: "notebook"
      cacheable: false
  csc_slurm_limits:
    data:
      partition: "interactive"
form:
  - csc_cores
  - csc_memory
  - csc_nvme
  - csc_slurm_project
  - csc_slurm_partition
  - csc_time
  - modules
  - jp_type
  - extra_jupyter_args
  - csc_slurm_limits
